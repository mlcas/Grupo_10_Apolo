<!DOCTYPE html>
<html lang="en">
 
  <%- include("../partial/head.ejs",{cssfile:"style-createProduct"}) %> <!--cssfile es una variable que va a guardar la hoja de estilo-->
<body>
    <%- include("../partial/header.ejs") %> <!--Aca estoy reutilizando codigo gracias a ejs-->

    <form action="/product/editProduct/<%= product.id %>?_method=PUT" method="POST" class="create-form" enctype="multipart/form-data" id="id-formEdit">
        <div class="control-formulario">
         <label>Nombre del Producto:</label>
         <input type="text" name="name" placeholder="nombre producto" class="control" id="name" value="<%= product.name %> "
         class="form-name <%= locals.errors && errors.name ? "is-invalid": null %>"
         value ="<%= locals.oldData ? oldData.name :null %>">
         <% if (locals.errors && errors.name){ %> 
             <div class="text-danger">
                 <%= errors.name.msg %> 
             </div>
             <% } %> <!--el atibuto name es de para una mejor identificacion del Backend-->
             <div id="div-nameEdit">

             </div>
        </div>
        <div class="control-formulario">
          <label>Precio:</label>
          <input type="text" name="price" class="control" value="<%= product.price %> ">
         </div>
         <div class="control-formulario">
          <label>Descuento:</label>
          <input type="number" name="discount" class="control" value="<%= product.discount %>">
         </div>
           <div class="control-formulario"> <!--este campo contiene el menu desplegable-->
             <label>Genero:</label> 
              <select name="gender" class="control"> <!--el name es solo para el Backend-->
               <option value="Hombre">Hombre</option> <!--el value es para q el backend identifique de que se trata-->
               <option value="Mujer">Mujer</option>
              </select>
           </div>
           <div class="control-formulario"> <!--este campo contiene el menu desplegable-->
            <label>Categoria:</label> 
            <p>
              <select name="category_id" id="" required>
                  <% categories.forEach(category => { %>
                  <option value="<%= category.id %>"
                       <% if (product.category_id == category.id) { %> <%= 'selected' %><% }; %>
                  >
                          <%= category.name %></option>
                  <% }); %>
              </select>
          </p>
            
          </div>
          <div class="control-formulario"> <!--este campo contiene el menu desplegable-->
            <label>Marca:</label> 
             <select name="brand" class="control"> <!--el name es solo para el Backend-->
              <option value="Adidas">Adidas</option> <!--el value es para q el backend identifique de que se trata-->
              <option value="Nike">Nike</option>
              <option value="Puma">Puma</option> 
              <option value="topper">Topper</option> 
              <option value="under armour">Under Armour</option> 
              <option value="umbro">Umbro</option> 
              <option value="kappa">Kappa</option> 
             </select>
          </div>
           <div class="control-formulario"> <!--este campo contiene el menu desplegable-->
            <label>Talle:</label> 
            <p>
              <select name="size_id" id="" required>
                  <% sizes.forEach(size => { %>
                  <option value="<%= size.id %>"
                       <% if (product.size_id == size.id) { %> <%= 'selected' %><% }; %>
                  >
                          <%= size.size %></option>
                  <% }); %>
              </select>
          </p>
            
          </div>
          <div class="control-formulario">
            <label>Descripcion:</label> <!--aca van los comentarios-->
            <textarea name="description"  class="control <%= locals.errors && errors.description ? "is-invalid": null %>" id
            = "description">  <%= product.description %><%= locals.oldData ? oldData.description :null %></textarea>
            <% if (locals.errors && errors.description){ %> 
              <div class="text-danger">
                  <%= errors.description.msg %> 
              </div>
              <% } %>  
              <div id="div-description">

              </div>
          </div>
          <div class="control-formulario">
            <label>Foto del Producto:</label>
            <input type="file" name="editImage" placeholder="IMAGEN" class="control" id="image">
            <% if (locals.errors && errors.image){ %> 
              <div class="text-danger">
                  <%= errors.image.msg %> 
              </div>
              <% } %>
              <div id="div-image">

              </div>
          </div>
          <div class="control-formulario">
            <div class="radio-button-container" >
              <label>Esta en Oferta:</label>
              <input type="radio" name="sale" class = "radio-button__radio">
            </div>
          </div>
          <div class="control-formulario">
            <div class="radio-button-container" >
              <label>Nueva Temporada:</label>
              <input type="radio" name="newseason" class = "radio-button__radio">
            </div>
          </div>
          <button type="submit" class="botton-form">Guardar Producto</button> <!--aca van los botones-->
      </form>


      <script src="/js/validatorEdit.js"></script>

    <%- include("../partial/footer.ejs") %> <!--Aca estoy reutilizando codigo gracias a ejs-->

</body>
</html>